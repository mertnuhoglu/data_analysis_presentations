<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<title>Data Analysis Applications using R</title>
	<meta name="description" content="Data Analysis Applications using R">
	<meta name="author" content="Mert Nuhoglu">
	<meta name="generator" content="slidify" />
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=1024, user-scalable=no">
	
	<!-- Required stylesheet -->
	<link rel="stylesheet" href="libraries/frameworks/deckjs/core/deck.core.css">
	<link rel="stylesheet" href="libraries/frameworks/deckjs/extensions/goto/deck.goto.css">
<link rel="stylesheet" href="libraries/frameworks/deckjs/extensions/hash/deck.hash.css">
<link rel="stylesheet" href="libraries/frameworks/deckjs/extensions/menu/deck.menu.css">
<link rel="stylesheet" href="libraries/frameworks/deckjs/extensions/navigation/deck.navigation.css">
<link rel="stylesheet" href="libraries/frameworks/deckjs/extensions/scale/deck.scale.css">
<link rel="stylesheet" href="libraries/frameworks/deckjs/extensions/status/deck.status.css">
<link rel="stylesheet" href="libraries/frameworks/deckjs/extensions/automatic/deck.automatic.css">
<!-- Style theme. More available in /themes/style/  -->
	<link rel="stylesheet" href="libraries/frameworks/deckjs/themes/style/web-2.0.css">
	
	<!-- Transition theme. More available in /themes/transition/  -->
	<link rel="stylesheet" href="libraries/frameworks/deckjs/themes/transition/horizontal-slide.css">
	<script src="libraries/frameworks/deckjs/modernizr.custom.js"></script>
	
	<!-- LOAD STYLE SHEETS -->
	<link rel="stylesheet" href="libraries/highlighters/highlight.js/css/solarized_light.css">
	
	  <link rel="stylesheet" href = "assets/css/ribbons.css">

</head>

<body class="deck-container">

  <!-- Begin slides -->
  <section class="slide " id="slide-1">
  <h2>Introduction</h2>
  <ul>
<li>Learning a language based on examples
- Foreign language

<ul>
<li>Mind extracts the grammer rules by itself

<ul>
<li>Foreign language learning theory of Stephen Krashen:
<a href="http://www.sk.com.br/sk-krash-english.html">http://www.sk.com.br/sk-krash-english.html</a></li>
<li>Learning is more fun: balance between challenging - difficulty</li>
</ul></li>
</ul></li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>What is data science?</h2>
  <ul>
<li>Interdisciplinary field

<ul>
<li>Programming</li>
<li>Statistics</li>
<li>Domain expertise - analysis</li>
</ul></li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>What is data science?</h2>
  <p><img src="assets/img/Venn-Diagram-of-Data-Scientist-Skills.png" alt="Venn Diagram for Data Science"></p>

</section>
<section class="slide class" id="id">
  <h2>Ecommerce: Conversion rate optimization</h2>
  <ul>
<li>Ecommerce site: BallOrange.com </li>
<li>Conversion: Collecting the email addresses of visitors of the blog</li>
<li>For all blog posts

<ul>
<li>Traffic varies</li>
<li>Conversion ratio varies</li>
</ul></li>
<li>The value of blog posts:

<ul>
<li>Traffic x conversion ratio</li>
</ul></li>
<li>Example:

<ul>
<li>Page A:

<ul>
<li>1000 visitors x %5 conversion = 50 emails</li>
</ul></li>
<li>Page B:

<ul>
<li>500 visitors x %15 conversion = 75 emails</li>
</ul></li>
</ul></li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>Conversion rate optimization 2</h2>
  <ul>
<li><p>Data collected from Google Analytics:</p>

<ul>
<li>Keyword - Visit: The number of visits per search keyword </li>
<li>Keyword - Page: To which blog page does a search keyword send the visitors</li>
<li>Page - Conversion Rate: Ratio of visitors that leave their email addresses in each page</li>
</ul></li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>Test Data Generation</h2>
  <p><code>ballorange_conversion_optimization()</code> in test_data.R</p>

<pre><code class="r">     data
</code></pre>

<pre><code>## $product
##  [1] &quot;p001&quot; &quot;p002&quot; &quot;p003&quot; &quot;p004&quot; &quot;p005&quot; &quot;p006&quot; &quot;p007&quot; &quot;p008&quot; &quot;p009&quot; &quot;p010&quot;
## 
## $company
##  [1] &quot;c001&quot; &quot;c002&quot; &quot;c003&quot; &quot;c004&quot; &quot;c005&quot; &quot;c006&quot; &quot;c007&quot; &quot;c008&quot; &quot;c009&quot; &quot;c010&quot;
## [11] &quot;c011&quot; &quot;c012&quot; &quot;c013&quot; &quot;c014&quot; &quot;c015&quot; &quot;c016&quot; &quot;c017&quot; &quot;c018&quot; &quot;c019&quot; &quot;c020&quot;
## [21] &quot;c021&quot; &quot;c022&quot; &quot;c023&quot; &quot;c024&quot; &quot;c025&quot; &quot;c026&quot; &quot;c027&quot; &quot;c028&quot; &quot;c029&quot; &quot;c030&quot;
## 
## $category
## [1] &quot;g001&quot; &quot;g002&quot; &quot;g003&quot;
## 
## $salesman
## [1] &quot;s001&quot; &quot;s002&quot; &quot;s003&quot; &quot;s004&quot; &quot;s005&quot; &quot;s006&quot;
## 
## $region
## [1] &quot;r001&quot; &quot;r002&quot; &quot;r003&quot; &quot;r004&quot;
## 
## $keyword
##  [1] &quot;kw001&quot; &quot;kw002&quot; &quot;kw003&quot; &quot;kw004&quot; &quot;kw005&quot; &quot;kw006&quot; &quot;kw007&quot; &quot;kw008&quot;
##  [9] &quot;kw009&quot; &quot;kw010&quot; &quot;kw011&quot; &quot;kw012&quot; &quot;kw013&quot; &quot;kw014&quot; &quot;kw015&quot;
## 
## $page
##  [1] &quot;pg001&quot; &quot;pg002&quot; &quot;pg003&quot; &quot;pg004&quot; &quot;pg005&quot; &quot;pg006&quot; &quot;pg007&quot; &quot;pg008&quot;
##  [9] &quot;pg009&quot; &quot;pg010&quot; &quot;pg011&quot; &quot;pg012&quot; &quot;pg013&quot; &quot;pg014&quot; &quot;pg015&quot; &quot;pg016&quot;
## [17] &quot;pg017&quot; &quot;pg018&quot; &quot;pg019&quot; &quot;pg020&quot; &quot;pg021&quot; &quot;pg022&quot; &quot;pg023&quot; &quot;pg024&quot;
## [25] &quot;pg025&quot; &quot;pg026&quot; &quot;pg027&quot; &quot;pg028&quot; &quot;pg029&quot; &quot;pg030&quot; &quot;pg031&quot; &quot;pg032&quot;
## [33] &quot;pg033&quot; &quot;pg034&quot; &quot;pg035&quot; &quot;pg036&quot; &quot;pg037&quot; &quot;pg038&quot; &quot;pg039&quot; &quot;pg040&quot;
## [41] &quot;pg041&quot; &quot;pg042&quot; &quot;pg043&quot; &quot;pg044&quot; &quot;pg045&quot; &quot;pg046&quot; &quot;pg047&quot; &quot;pg048&quot;
## [49] &quot;pg049&quot; &quot;pg050&quot;
## 
## $customer
##  [1] &quot;c001&quot; &quot;c002&quot; &quot;c003&quot; &quot;c004&quot; &quot;c005&quot; &quot;c006&quot; &quot;c007&quot; &quot;c008&quot; &quot;c009&quot; &quot;c010&quot;
## [11] &quot;c011&quot; &quot;c012&quot; &quot;c013&quot; &quot;c014&quot; &quot;c015&quot; &quot;c016&quot; &quot;c017&quot; &quot;c018&quot; &quot;c019&quot; &quot;c020&quot;
## 
## $location
##  [1] &quot;loc001&quot; &quot;loc002&quot; &quot;loc003&quot; &quot;loc004&quot; &quot;loc005&quot; &quot;loc006&quot; &quot;loc007&quot;
##  [8] &quot;loc008&quot; &quot;loc009&quot; &quot;loc010&quot;
## 
## $campaign
## [1] &quot;campaign001&quot; &quot;campaign002&quot; &quot;campaign003&quot; &quot;campaign004&quot; &quot;campaign005&quot;
## [6] &quot;campaign006&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Data model</h2>
  <ul>
<li>keyword-page: kp</li>
<li>page-conversion: pc</li>
<li>keyword-visit: kv</li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>Generate test data</h2>
  <pre><code class="r">    set.seed(1)
    n_kw = length(data$keyword)
    n_pg = length(data$page)
    kv = data.table(
        keyword = data$keyword %&gt;% sample,
        visit = (runif(n_kw) * 100) %&gt;% ceiling)
    kp = data.table(
        keyword = kv$keyword %&gt;% sample_with_replace(n_pg),
        page = data$page %&gt;% sample(n_pg))
    pc = data.table(
        page = kp$page %&gt;% sample(n_pg),
        conversion = (runif(n_pg) * 0.05) %&gt;% sample(n_pg) %&gt;% round(3))
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Generate test data 2</h2>
  <pre><code class="r">head(kv)
</code></pre>

<pre><code>##    keyword visit
## 1:   kw004    50
## 2:   kw006    72
## 3:   kw008   100
## 4:   kw011    39
## 5:   kw003    78
## 6:   kw009    94
</code></pre>

<pre><code class="r">head(kp)
</code></pre>

<pre><code>##    keyword  page
## 1:   kw014 pg022
## 2:   kw005 pg035
## 3:   kw014 pg020
## 4:   kw008 pg016
## 5:   kw012 pg049
## 6:   kw002 pg010
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Generate test data 3</h2>
  <pre><code class="r">head(pc)
</code></pre>

<pre><code>##     page conversion
## 1: pg021      0.042
## 2: pg016      0.038
## 3: pg035      0.043
## 4: pg030      0.036
## 5: pg024      0.002
## 6: pg004      0.005
</code></pre>

<pre><code class="r">pc %&gt;% head
</code></pre>

<pre><code>##     page conversion
## 1: pg021      0.042
## 2: pg016      0.038
## 3: pg035      0.043
## 4: pg030      0.036
## 5: pg024      0.002
## 6: pg004      0.005
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">dn = read_data_naming()
dn
</code></pre>

<pre><code>##     variable base_name seq_end
##  1:  product         p      10
##  2:  company         c      30
##  3: category         g       3
##  4: salesman         s       6
##  5:   region         r       4
##  6:  keyword        kw      15
##  7:     page        pg      50
##  8: customer         c      20
##  9: location       loc      10
## 10: campaign  campaign       6
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">generate_data(&quot;page&quot;, 10)
</code></pre>

<pre><code>##  [1] &quot;page001&quot; &quot;page002&quot; &quot;page003&quot; &quot;page004&quot; &quot;page005&quot; &quot;page006&quot; &quot;page007&quot;
##  [8] &quot;page008&quot; &quot;page009&quot; &quot;page010&quot;
</code></pre>

<pre><code class="r">Map( generate_data, &quot;page&quot;, 10)
</code></pre>

<pre><code>## $page
##  [1] &quot;page001&quot; &quot;page002&quot; &quot;page003&quot; &quot;page004&quot; &quot;page005&quot; &quot;page006&quot; &quot;page007&quot;
##  [8] &quot;page008&quot; &quot;page009&quot; &quot;page010&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">Map( generate_data, c(&quot;page&quot;, &quot;keyword&quot;), 10)
</code></pre>

<pre><code>## $page
##  [1] &quot;page001&quot; &quot;page002&quot; &quot;page003&quot; &quot;page004&quot; &quot;page005&quot; &quot;page006&quot; &quot;page007&quot;
##  [8] &quot;page008&quot; &quot;page009&quot; &quot;page010&quot;
## 
## $keyword
##  [1] &quot;keyword001&quot; &quot;keyword002&quot; &quot;keyword003&quot; &quot;keyword004&quot; &quot;keyword005&quot;
##  [6] &quot;keyword006&quot; &quot;keyword007&quot; &quot;keyword008&quot; &quot;keyword009&quot; &quot;keyword010&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">Map( generate_data, c(&quot;page&quot;, &quot;keyword&quot;), c(10, 20))
</code></pre>

<pre><code>## $page
##  [1] &quot;page001&quot; &quot;page002&quot; &quot;page003&quot; &quot;page004&quot; &quot;page005&quot; &quot;page006&quot; &quot;page007&quot;
##  [8] &quot;page008&quot; &quot;page009&quot; &quot;page010&quot;
## 
## $keyword
##  [1] &quot;keyword001&quot; &quot;keyword002&quot; &quot;keyword003&quot; &quot;keyword004&quot; &quot;keyword005&quot;
##  [6] &quot;keyword006&quot; &quot;keyword007&quot; &quot;keyword008&quot; &quot;keyword009&quot; &quot;keyword010&quot;
## [11] &quot;keyword011&quot; &quot;keyword012&quot; &quot;keyword013&quot; &quot;keyword014&quot; &quot;keyword015&quot;
## [16] &quot;keyword016&quot; &quot;keyword017&quot; &quot;keyword018&quot; &quot;keyword019&quot; &quot;keyword020&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">generate_data %&gt;% 
   Map( c(&quot;page&quot;, &quot;keyword&quot;), c(10, 20) )
</code></pre>

<pre><code>## $page
##  [1] &quot;page001&quot; &quot;page002&quot; &quot;page003&quot; &quot;page004&quot; &quot;page005&quot; &quot;page006&quot; &quot;page007&quot;
##  [8] &quot;page008&quot; &quot;page009&quot; &quot;page010&quot;
## 
## $keyword
##  [1] &quot;keyword001&quot; &quot;keyword002&quot; &quot;keyword003&quot; &quot;keyword004&quot; &quot;keyword005&quot;
##  [6] &quot;keyword006&quot; &quot;keyword007&quot; &quot;keyword008&quot; &quot;keyword009&quot; &quot;keyword010&quot;
## [11] &quot;keyword011&quot; &quot;keyword012&quot; &quot;keyword013&quot; &quot;keyword014&quot; &quot;keyword015&quot;
## [16] &quot;keyword016&quot; &quot;keyword017&quot; &quot;keyword018&quot; &quot;keyword019&quot; &quot;keyword020&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">dn$base_name
</code></pre>

<pre><code>##  [1] &quot;p&quot;        &quot;c&quot;        &quot;g&quot;        &quot;s&quot;        &quot;r&quot;        &quot;kw&quot;      
##  [7] &quot;pg&quot;       &quot;c&quot;        &quot;loc&quot;      &quot;campaign&quot;
</code></pre>

<pre><code class="r">dn$seq_end
</code></pre>

<pre><code>##  [1] 10 30  3  6  4 15 50 20 10  6
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">generate_data %&gt;%
        Map(dn$base_name, dn$seq_end)
</code></pre>

<pre><code>## $p
##  [1] &quot;p001&quot; &quot;p002&quot; &quot;p003&quot; &quot;p004&quot; &quot;p005&quot; &quot;p006&quot; &quot;p007&quot; &quot;p008&quot; &quot;p009&quot; &quot;p010&quot;
## 
## $c
##  [1] &quot;c001&quot; &quot;c002&quot; &quot;c003&quot; &quot;c004&quot; &quot;c005&quot; &quot;c006&quot; &quot;c007&quot; &quot;c008&quot; &quot;c009&quot; &quot;c010&quot;
## [11] &quot;c011&quot; &quot;c012&quot; &quot;c013&quot; &quot;c014&quot; &quot;c015&quot; &quot;c016&quot; &quot;c017&quot; &quot;c018&quot; &quot;c019&quot; &quot;c020&quot;
## [21] &quot;c021&quot; &quot;c022&quot; &quot;c023&quot; &quot;c024&quot; &quot;c025&quot; &quot;c026&quot; &quot;c027&quot; &quot;c028&quot; &quot;c029&quot; &quot;c030&quot;
## 
## $g
## [1] &quot;g001&quot; &quot;g002&quot; &quot;g003&quot;
## 
## $s
## [1] &quot;s001&quot; &quot;s002&quot; &quot;s003&quot; &quot;s004&quot; &quot;s005&quot; &quot;s006&quot;
## 
## $r
## [1] &quot;r001&quot; &quot;r002&quot; &quot;r003&quot; &quot;r004&quot;
## 
## $kw
##  [1] &quot;kw001&quot; &quot;kw002&quot; &quot;kw003&quot; &quot;kw004&quot; &quot;kw005&quot; &quot;kw006&quot; &quot;kw007&quot; &quot;kw008&quot;
##  [9] &quot;kw009&quot; &quot;kw010&quot; &quot;kw011&quot; &quot;kw012&quot; &quot;kw013&quot; &quot;kw014&quot; &quot;kw015&quot;
## 
## $pg
##  [1] &quot;pg001&quot; &quot;pg002&quot; &quot;pg003&quot; &quot;pg004&quot; &quot;pg005&quot; &quot;pg006&quot; &quot;pg007&quot; &quot;pg008&quot;
##  [9] &quot;pg009&quot; &quot;pg010&quot; &quot;pg011&quot; &quot;pg012&quot; &quot;pg013&quot; &quot;pg014&quot; &quot;pg015&quot; &quot;pg016&quot;
## [17] &quot;pg017&quot; &quot;pg018&quot; &quot;pg019&quot; &quot;pg020&quot; &quot;pg021&quot; &quot;pg022&quot; &quot;pg023&quot; &quot;pg024&quot;
## [25] &quot;pg025&quot; &quot;pg026&quot; &quot;pg027&quot; &quot;pg028&quot; &quot;pg029&quot; &quot;pg030&quot; &quot;pg031&quot; &quot;pg032&quot;
## [33] &quot;pg033&quot; &quot;pg034&quot; &quot;pg035&quot; &quot;pg036&quot; &quot;pg037&quot; &quot;pg038&quot; &quot;pg039&quot; &quot;pg040&quot;
## [41] &quot;pg041&quot; &quot;pg042&quot; &quot;pg043&quot; &quot;pg044&quot; &quot;pg045&quot; &quot;pg046&quot; &quot;pg047&quot; &quot;pg048&quot;
## [49] &quot;pg049&quot; &quot;pg050&quot;
## 
## $c
##  [1] &quot;c001&quot; &quot;c002&quot; &quot;c003&quot; &quot;c004&quot; &quot;c005&quot; &quot;c006&quot; &quot;c007&quot; &quot;c008&quot; &quot;c009&quot; &quot;c010&quot;
## [11] &quot;c011&quot; &quot;c012&quot; &quot;c013&quot; &quot;c014&quot; &quot;c015&quot; &quot;c016&quot; &quot;c017&quot; &quot;c018&quot; &quot;c019&quot; &quot;c020&quot;
## 
## $loc
##  [1] &quot;loc001&quot; &quot;loc002&quot; &quot;loc003&quot; &quot;loc004&quot; &quot;loc005&quot; &quot;loc006&quot; &quot;loc007&quot;
##  [8] &quot;loc008&quot; &quot;loc009&quot; &quot;loc010&quot;
## 
## $campaign
## [1] &quot;campaign001&quot; &quot;campaign002&quot; &quot;campaign003&quot; &quot;campaign004&quot; &quot;campaign005&quot;
## [6] &quot;campaign006&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">data = generate_data %&gt;%
        Map(dn$base_name, dn$seq_end) %&gt;%
        setNames(dn$variable)
data
</code></pre>

<pre><code>## $product
##  [1] &quot;p001&quot; &quot;p002&quot; &quot;p003&quot; &quot;p004&quot; &quot;p005&quot; &quot;p006&quot; &quot;p007&quot; &quot;p008&quot; &quot;p009&quot; &quot;p010&quot;
## 
## $company
##  [1] &quot;c001&quot; &quot;c002&quot; &quot;c003&quot; &quot;c004&quot; &quot;c005&quot; &quot;c006&quot; &quot;c007&quot; &quot;c008&quot; &quot;c009&quot; &quot;c010&quot;
## [11] &quot;c011&quot; &quot;c012&quot; &quot;c013&quot; &quot;c014&quot; &quot;c015&quot; &quot;c016&quot; &quot;c017&quot; &quot;c018&quot; &quot;c019&quot; &quot;c020&quot;
## [21] &quot;c021&quot; &quot;c022&quot; &quot;c023&quot; &quot;c024&quot; &quot;c025&quot; &quot;c026&quot; &quot;c027&quot; &quot;c028&quot; &quot;c029&quot; &quot;c030&quot;
## 
## $category
## [1] &quot;g001&quot; &quot;g002&quot; &quot;g003&quot;
## 
## $salesman
## [1] &quot;s001&quot; &quot;s002&quot; &quot;s003&quot; &quot;s004&quot; &quot;s005&quot; &quot;s006&quot;
## 
## $region
## [1] &quot;r001&quot; &quot;r002&quot; &quot;r003&quot; &quot;r004&quot;
## 
## $keyword
##  [1] &quot;kw001&quot; &quot;kw002&quot; &quot;kw003&quot; &quot;kw004&quot; &quot;kw005&quot; &quot;kw006&quot; &quot;kw007&quot; &quot;kw008&quot;
##  [9] &quot;kw009&quot; &quot;kw010&quot; &quot;kw011&quot; &quot;kw012&quot; &quot;kw013&quot; &quot;kw014&quot; &quot;kw015&quot;
## 
## $page
##  [1] &quot;pg001&quot; &quot;pg002&quot; &quot;pg003&quot; &quot;pg004&quot; &quot;pg005&quot; &quot;pg006&quot; &quot;pg007&quot; &quot;pg008&quot;
##  [9] &quot;pg009&quot; &quot;pg010&quot; &quot;pg011&quot; &quot;pg012&quot; &quot;pg013&quot; &quot;pg014&quot; &quot;pg015&quot; &quot;pg016&quot;
## [17] &quot;pg017&quot; &quot;pg018&quot; &quot;pg019&quot; &quot;pg020&quot; &quot;pg021&quot; &quot;pg022&quot; &quot;pg023&quot; &quot;pg024&quot;
## [25] &quot;pg025&quot; &quot;pg026&quot; &quot;pg027&quot; &quot;pg028&quot; &quot;pg029&quot; &quot;pg030&quot; &quot;pg031&quot; &quot;pg032&quot;
## [33] &quot;pg033&quot; &quot;pg034&quot; &quot;pg035&quot; &quot;pg036&quot; &quot;pg037&quot; &quot;pg038&quot; &quot;pg039&quot; &quot;pg040&quot;
## [41] &quot;pg041&quot; &quot;pg042&quot; &quot;pg043&quot; &quot;pg044&quot; &quot;pg045&quot; &quot;pg046&quot; &quot;pg047&quot; &quot;pg048&quot;
## [49] &quot;pg049&quot; &quot;pg050&quot;
## 
## $customer
##  [1] &quot;c001&quot; &quot;c002&quot; &quot;c003&quot; &quot;c004&quot; &quot;c005&quot; &quot;c006&quot; &quot;c007&quot; &quot;c008&quot; &quot;c009&quot; &quot;c010&quot;
## [11] &quot;c011&quot; &quot;c012&quot; &quot;c013&quot; &quot;c014&quot; &quot;c015&quot; &quot;c016&quot; &quot;c017&quot; &quot;c018&quot; &quot;c019&quot; &quot;c020&quot;
## 
## $location
##  [1] &quot;loc001&quot; &quot;loc002&quot; &quot;loc003&quot; &quot;loc004&quot; &quot;loc005&quot; &quot;loc006&quot; &quot;loc007&quot;
##  [8] &quot;loc008&quot; &quot;loc009&quot; &quot;loc010&quot;
## 
## $campaign
## [1] &quot;campaign001&quot; &quot;campaign002&quot; &quot;campaign003&quot; &quot;campaign004&quot; &quot;campaign005&quot;
## [6] &quot;campaign006&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generate such test data easily?</h2>
  <pre><code class="r">data %&gt;% str
</code></pre>

<pre><code>## List of 10
##  $ product : chr [1:10] &quot;p001&quot; &quot;p002&quot; &quot;p003&quot; &quot;p004&quot; ...
##  $ company : chr [1:30] &quot;c001&quot; &quot;c002&quot; &quot;c003&quot; &quot;c004&quot; ...
##  $ category: chr [1:3] &quot;g001&quot; &quot;g002&quot; &quot;g003&quot;
##  $ salesman: chr [1:6] &quot;s001&quot; &quot;s002&quot; &quot;s003&quot; &quot;s004&quot; ...
##  $ region  : chr [1:4] &quot;r001&quot; &quot;r002&quot; &quot;r003&quot; &quot;r004&quot;
##  $ keyword : chr [1:15] &quot;kw001&quot; &quot;kw002&quot; &quot;kw003&quot; &quot;kw004&quot; ...
##  $ page    : chr [1:50] &quot;pg001&quot; &quot;pg002&quot; &quot;pg003&quot; &quot;pg004&quot; ...
##  $ customer: chr [1:20] &quot;c001&quot; &quot;c002&quot; &quot;c003&quot; &quot;c004&quot; ...
##  $ location: chr [1:10] &quot;loc001&quot; &quot;loc002&quot; &quot;loc003&quot; &quot;loc004&quot; ...
##  $ campaign: chr [1:6] &quot;campaign001&quot; &quot;campaign002&quot; &quot;campaign003&quot; &quot;campaign004&quot; ...
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Test datatable</h2>
  <pre><code class="r">    n_kw = length(data$keyword)
    kp = data.table(
        keyword = kv$keyword %&gt;% sample,
        page = data$page %&gt;% sample(n_kw))
kp
</code></pre>

<pre><code>##     keyword  page
##  1:   kw004 pg035
##  2:   kw014 pg005
##  3:   kw013 pg006
##  4:   kw003 pg003
##  5:   kw007 pg043
##  6:   kw006 pg031
##  7:   kw008 pg049
##  8:   kw001 pg022
##  9:   kw002 pg020
## 10:   kw015 pg016
## 11:   kw009 pg040
## 12:   kw010 pg007
## 13:   kw005 pg045
## 14:   kw011 pg047
## 15:   kw012 pg015
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>sample function</h2>
  <pre><code class="r">set.seed(1)
sample(1:10, 3)
</code></pre>

<pre><code>## [1] 3 4 5
</code></pre>

<pre><code class="r">set.seed(1)
1:10 %&gt;% sample(3)
</code></pre>

<pre><code>## [1] 3 4 5
</code></pre>

<pre><code class="r">sample(c(&quot;ali&quot;, &quot;veli&quot;, &quot;can&quot;, &quot;cem&quot;), 3)
</code></pre>

<pre><code>## [1] &quot;cem&quot;  &quot;ali&quot;  &quot;veli&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Test datatable</h2>
  <pre><code class="r">    kv = data.table(
        keyword = data$keyword %&gt;% sample,
        visit = (runif(n_kw) * 100) %&gt;% ceiling)
kv
</code></pre>

<pre><code>##     keyword visit
##  1:   kw015    22
##  2:   kw010    66
##  3:   kw009    13
##  4:   kw001    27
##  5:   kw003    39
##  6:   kw002     2
##  7:   kw007    39
##  8:   kw004    87
##  9:   kw006    35
## 10:   kw011    49
## 11:   kw008    60
## 12:   kw005    50
## 13:   kw014    19
## 14:   kw013    83
## 15:   kw012    67
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Random number generation</h2>
  <pre><code class="r">runif(10)
</code></pre>

<pre><code>##  [1] 0.7942399 0.1079436 0.7237109 0.4112744 0.8209463 0.6470602 0.7829328
##  [8] 0.5530363 0.5297196 0.7893562
</code></pre>

<pre><code class="r">runif(10) * 100
</code></pre>

<pre><code>##  [1]  2.333120 47.723007 73.231374 69.273156 47.761962 86.120948 43.809711
##  [8] 24.479728  7.067905  9.946616
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Generating test data - complete</h2>
  <pre><code class="r">    dn = read_data_naming()
    data = generate_data %&gt;%
        Map(dn$base_name, dn$seq_end) %&gt;%
        setNames(dn$variable)

    set.seed(1)
    n_kw = length(data$keyword)
    kv = data.table(
        keyword = data$keyword %&gt;% sample,
        visit = (runif(n_kw) * 100) %&gt;% ceiling)
    kp = data.table(
        keyword = kv$keyword %&gt;% sample,
        page = data$page %&gt;% sample(n_kw))
    pc = data.table(
        page = kp$page %&gt;% sample,
        conversion = (runif(n_kw) * 0.05) %&gt;% sample(n_kw) %&gt;% round(3))
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Sorun</h2>
  <ul>
<li>Find 5 keywords that let us collect the most email addresses</li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>What is the conversion ratio for some keyword?</h2>
  <ul>
<li>How many visitors for keyword &quot;kw003&quot;?</li>
</ul>

<pre><code class="r">    keyword = &#39;kw003&#39;
    setkey(kv, keyword)
    kv3 = kv[keyword]
  kv3
</code></pre>

<pre><code>##    keyword visit
## 1:   kw003    78
</code></pre>

<ul>
<li>Let&#39;s just get the visitors amount</li>
</ul>

<pre><code class="r">setkey(kv, keyword)
visits = kv[keyword]$visit
visits
</code></pre>

<pre><code>## [1] 78
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How much traffic does this keyword bring to which page?</h2>
  <pre><code class="r">  setkey(kv, keyword)
    setkey(kp, keyword)
    kp3 = kv[keyword]
  kp3
</code></pre>

<pre><code>##    keyword visit
## 1:   kw003    78
</code></pre>

<pre><code class="r">    page = kp[keyword]$page
  page
</code></pre>

<pre><code>## [1] &quot;pg004&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How much is the conversion ration of that page?</h2>
  <pre><code class="r">setkey(pc, page)
pc3 = pc[page]
pc3
</code></pre>

<pre><code>##     page conversion
## 1: pg004      0.036
</code></pre>

<pre><code class="r">conversion_rate = pc3$conversion
conversion_rate
</code></pre>

<pre><code>## [1] 0.036
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>What is the amount of total conversions (number of collected emails)?</h2>
  <pre><code class="r">setkey(kv, keyword)
visits = kv[keyword]$visit
conversions = visits * conversion_rate
conversions
</code></pre>

<pre><code>## [1] 2.808
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>How to generalize this calculation for all keywords and pages?</h2>
  <ol>
<li>Approach: Imperative approach</li>
<li>Let&#39;s do the above calculation for each keyword

<ul>
<li>for loop of keywords

<ul>
<li>get the pages of that keyword</li>
</ul></li>
<li>inner loop for pages

<ul>
<li>get the conversion ration of the page</li>
<li>multiply conversion ratios with visitors amounts</li>
<li>sum up the conversion amounts for all the pages belonging to the same keyword</li>
</ul></li>
</ul></li>
</ol>

</section>
<section class="slide class" id="id">
  <h2>Generalization of the calculation 2</h2>
  <ol>
<li>Approach: Declarative approach

<ul>
<li>Describe what to do instead of how to do it</li>
<li>Sets and relationships</li>
<li>SQL style</li>
</ul></li>
<li>SQL table = a mapping between n variables/sets

<ul>
<li>keyword-page: kp</li>
<li>page-conversion: pc</li>
<li>keyword-visit: kv</li>
</ul></li>
</ol>

</section>
<section class="slide class" id="id">
  <h2>Join operation</h2>
  <ul>
<li>Join the mappings/tables that have common variables/sets</li>
<li>Example: 

<ul>
<li>keyword-page</li>
<li>keyword-visit</li>
</ul></li>
<li>Result:

<ul>
<li>keyword-page-visit</li>
</ul></li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>Symbolic thinking</h2>
  <ul>
<li>Ignore how we are going to join</li>
<li>Focus into what we will do</li>
<li>Let&#39;s join the tables keyword-page and page-conversion

<ul>
<li>keyword-page-conversion</li>
</ul></li>
<li>Add page-visit table to that

<ul>
<li>keyword-page-conversion-visit</li>
</ul></li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>Symbolic thinking</h2>
  <ul>
<li>conversion_number = conversion x visit

<ul>
<li>keyword-page-conversion-visit-conversion_number</li>
</ul></li>
<li>remove unnecessary variables:

<ul>
<li>keyword-conversion_number</li>
</ul></li>
<li>there are n rows for each keyword

<ul>
<li>group the rows that have the same keyword (pivoting/grouping)</li>
<li>sum conversion_number in each group: total_conversion</li>
</ul></li>
<li>order all the rows by total_conversion</li>
<li>get the top 5</li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>Let&#39;s code this procedure</h2>
  <pre><code class="r">    r = kp %&gt;%
        inner_join(pc, by=&quot;page&quot;) %&gt;%
        inner_join(kv, by=&quot;keyword&quot;) %&gt;%
        mutate( conversion_number = visit * conversion ) %&gt;%
        group_by(keyword) %&gt;%
        summarise(total_conversion = sum(conversion_number)) %&gt;%
        select(keyword, total_conversion) %&gt;%
        arrange(total_conversion) 
r %&gt;% head
</code></pre>

<pre><code>##   keyword total_conversion
## 1   kw013            0.038
## 2   kw007            0.245
## 3   kw004            0.300
## 4   kw010            0.440
## 5   kw005            0.468
## 6   kw012            0.624
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Reverse the ordering</h2>
  <pre><code class="r">    r = r %&gt;%
        arrange(desc(total_conversion))
r %&gt;% head
</code></pre>

<pre><code>##   keyword total_conversion
## 1   kw015            4.176
## 2   kw003            2.808
## 3   kw006            2.808
## 4   kw002            1.677
## 5   kw011            1.482
## 6   kw014            1.452
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>What pages are the targets of the best keywords?</h2>
  <ul>
<li>Get the best 3 keywords (filtering)</li>
<li>What are the pages these keywords provide traffic?</li>
</ul>

<pre><code class="r">top_keywords = r$keyword[1:3]
top_kp = kp %&gt;%
  filter(keyword %in% top_keywords)
top_kp %&gt;% head
</code></pre>

<pre><code>##    keyword  page
## 1:   kw003 pg004
## 2:   kw006 pg025
## 3:   kw015 pg015
</code></pre>

<pre><code class="r">top_pages = top_kp$page
top_pages
</code></pre>

<pre><code>## [1] &quot;pg004&quot; &quot;pg025&quot; &quot;pg015&quot;
</code></pre>

</section>
<section class="slide class" id="id">
  <h2>Functional programming in these codes?</h2>
  <ul>
<li>Functional sequence

<ul>
<li>Functional:</li>
<li>input: function</li>
<li>output: data (vector)</li>
</ul></li>
<li>Higher order functions

<ul>
<li>input: function</li>
<li>output: function</li>
</ul></li>
<li>There is no for loop </li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>Links</h2>
  <ul>
<li><a href="https://www.facebook.com/groups/465842350233183/">Data Science Istanbul</a></li>
<li><a href="http://www.rstudio.com/resources/webinars/">RStudio Webinars</a></li>
<li><a href="http://fsharpforfunandprofit.com/fppatterns/">Functional Programming Design Patterns</a></li>
<li><a href="https://www.youtube.com/watch?v=ZhuHCtR3xq8">Brian Beckman: Don&#39;t fear the Monad</a></li>
<li><a href="http://palmstroem.blogspot.com.tr/2012/05/lambda-calculus-for-absolute-dummies.html">The Lambda Calculus for Absolute Dummies (like myself)</a></li>
</ul>

</section>
<section class="slide class" id="id">
  <h2>Presentation and codes</h2>
  <ul>
<li>Html5 slides: <a href="http://mertnuhoglu.github.io/data_analysis_istanbulcoders/index.html">http://mertnuhoglu.github.io/data_analysis_istanbulcoders/index.html</a></li>
<li>Source codes: <a href="https://github.com/mertnuhoglu/data_analysis_istanbulcoders">https://github.com/mertnuhoglu/data_analysis_istanbulcoders</a></li>
<li>Tools (PowerPoint killers): 

<ul>
<li><a href="http://ramnathv.github.io/slidify/">slidify</a></li>
<li><a href="http://yihui.name/knitr/">knitr</a></li>
<li><a href="http://rmarkdown.rstudio.com/">RMarkdown</a></li>
</ul></li>
</ul>

</section>
	<div class='deck-automatic-link' title="Play/Pause">Play/Pause</div>
</body>
  <!-- deck.navigation snippet -->
  <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
  <a href="#" class="deck-next-link" title="Next">&#8594;</a>
  
  <!-- deck.status snippet -->
  <p class="deck-status">
  <span class="deck-status-current"></span>
    /
  <span class="deck-status-total"></span>
  </p>
  
  <!-- deck.goto snippet -->
  <form action="." method="get" class="goto-form">
  	<label for="goto-slide">Go to slide:</label>
  	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
  	<datalist id="goto-datalist"></datalist>
  	<input type="submit" value="Go">
  </form>
  
  <!-- deck.hash snippet -->
  <a href="." title="Permalink to this slide" class="deck-permalink">#</a>
  
  
  <!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/frameworks/deckjs/jquery-1.7.min.js"><\/script>')</script>
  
  <!-- Add Slide Class to Build Elements -->
  <script type='text/javascript'>
  $('ol.build li').addClass('slide')
  $('ul.build li').addClass('slide')
  </script>
  
  <!-- Deck Core and extensions -->
  <script src="libraries/frameworks/deckjs/core/deck.core.js"></script>
  <script src="libraries/frameworks/deckjs/extensions/goto/deck.goto.js"></script>
<script src="libraries/frameworks/deckjs/extensions/hash/deck.hash.js"></script>
<script src="libraries/frameworks/deckjs/extensions/menu/deck.menu.js"></script>
<script src="libraries/frameworks/deckjs/extensions/navigation/deck.navigation.js"></script>
<script src="libraries/frameworks/deckjs/extensions/scale/deck.scale.js"></script>
<script src="libraries/frameworks/deckjs/extensions/status/deck.status.js"></script>
<script src="libraries/frameworks/deckjs/extensions/automatic/deck.automatic.js"></script>
<!-- Initialize the deck -->
  <script>
  $(function() {
    $.extend(true, $.deck.defaults, {
    automatic: {
      startRunning: false,    // true or false
      cycle: false,           // true or false
      slideDuration: 10000 // duration in milliseconds
    }})
  	$.deck('.slide');
  });
  </script>  <!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
 

</html>